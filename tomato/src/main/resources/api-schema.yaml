openapi: "3.0.0"
info:
  title: TOMATO Timer Document
  version: "0.0.1"
  description: ãƒˆãƒãƒˆãªAPIã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã ã‚ˆï½ã‚“ã€‚ğŸ…
tags:
  - name: tomato
    description: ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ã‚¿ã‚¤ãƒé–¢é€£ã®API
paths:
  /tomato/v1/createTimer:
    post:
      summary: "ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ã‚¿ã‚¤ãƒä½œæˆ"
      description: "ã‚¿ã‚¤ãƒãƒ¼ã‚’æ–°è¦ä½œæˆã—ã¾ã™ã€‚"
      operationId: "createTimer"
      tags:
        - tomato
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateTimerForm"
      responses:
        "201":
          description: "Created"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateTimerDTO"
        "400":
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestErrorDTO"
components:
  schemas:
    CreateTimerForm:
      type: object
      properties:
        workDuration:
          type: integer
          description: "ä½œæ¥­æ™‚é–“"
        breakDuration:
          type: integer
          description: "ä¼‘æ†©æ™‚é–“"
        totalSetCount:
          type: integer
          description: "ãƒˆãƒ¼ã‚¿ãƒ«ã‚»ãƒƒãƒˆæ•°"
      example:
        workDuration: 15
        breakDuration: 5
        totalSetCount: 3
      required:
        - workDuration
        - breakDuration
        - totalSetCount
    CreateTimerFormDTO:
      allOf:
        - $ref: "#/components/schemas/CreateTimerForm"
    CreateTimerDTO:
      type: object
      properties:
        timerId:
          type: string
          description: "ã‚¿ã‚¤ãƒãƒ¼ID"
        setList:
          type: array
          description: "ã‚»ãƒƒãƒˆãƒªã‚¹ãƒˆ"
          items:
            $ref: "#/components/schemas/SetDetail"
      example:
        timerId: 1
        setList:
          - currentSetCount: 1
            startWorkTime: "2024/07/30 21:15:00"
            endWorkTime: "2024/07/30 21:15:00"
            endBreakTime: "2024/07/30 21:20:00"
          - currentSetCount: 2
            startWorkTime: "2024/07/30 21:20:00"
            endWorkTime: "2024/07/30 21:35:00"
            endBreakTime: "2024/07/30 21:40:00"
          - currentSetCount: 3
            startWorkTime: "2024/07/30 21:40:00"
            endWorkTime: "2024/07/30 21:55:00"
            endBreakTime: "2024/07/30 22:00:00"
      required:
        - timerId
        - startWorkTime
        - endWorkTime
        - endBreakTime
    BadRequestErrorDTO:
      description: "ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒä¸æ­£ã§ã™"
      type: object
      properties:
        title:
          type: string
          description: "ã‚¨ãƒ©ãƒ¼ã®ã‚¿ã‚¤ãƒˆãƒ«"
        detail:
          type: string
          description: "ã‚¨ãƒ©ãƒ¼ã®è©³ç´°"
        status:
          type: string
          description: "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"
        invalidParams:
          type: array
          items:
            $ref: "#/components/schemas/InvaildDetail"
      required:
        - title
        - detail
        - status
        - invalidParams
      example:
        title: "Bad Request"
        detail: "ä½œæ¥­æ™‚é–“ã¯å¿…é ˆã§ã™ã€‚"
        status: "404"
        invalidParams:
          - name: "workDuration"
            reason: "å€¤ãŒæ¬ è½ã—ã¦ã„ã¾ã™"
    InvaildDetail:
      description: "ä¸æ­£ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã¤ã„ã¦ã®è©³ç´°"
      type: object
      properties:
        name:
          type: string
          description: "ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å"
        reason:
          type: string
          description: "ã‚¨ãƒ©ãƒ¼ã®ç†ç”±"
      required:
        - name
        - reason
    SetDetail:
      type: object
      properties:
        currentSetCount:
          type: integer
          description: "ç¾åœ¨ã®ã‚»ãƒƒãƒˆæ•°"
        startWorkDatetime:
          type: string
          description: "ä½œæ¥­é–‹å§‹æ—¥æ™‚åˆ†ç§’"
        endWorkDatetime:
          type: string
          description: "ä½œæ¥­çµ‚äº†æ—¥æ™‚åˆ†ç§’"
        endBreakDatetime:
          type: string
          description: "ä¼‘æ†©çµ‚äº†æ—¥æ™‚åˆ†ç§’"
        statusTypeCode:
          type: string
          description: "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"
    TimerInformationEntity:
      type: object
      properties:
        timerId:
          type: string
          description: "ã‚¿ã‚¤ãƒãƒ¼ID"
        currentSetCount:
          type: integer
          description: "ç¾åœ¨ã®ã‚»ãƒƒãƒˆæ•°"
        totalSetCount:
          type: integer
          description: "ãƒˆãƒ¼ã‚¿ãƒ«ã‚»ãƒƒãƒˆæ•°"
        startWorkDatetime:
          type: string
          description: "ä½œæ¥­é–‹å§‹æ—¥æ™‚åˆ†ç§’"
        endWorkDatetime:
          type: string
          description: "çµ‚äº†é–‹å§‹æ—¥æ™‚åˆ†ç§’"
        endBreakDatetime:
          type: string
          description: "ä¼‘æ†©çµ‚äº†æ—¥æ™‚åˆ†ç§’"
        statusTypeCode:
          type: string
          description: "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹"
        insertDatetime:
          type: string
          description: "ç™»éŒ²æ—¥æ™‚åˆ†ç§’"
        insertFunction:
          type: string
          description: "ç™»éŒ²æ©Ÿèƒ½"
        updateDatetime:
          type: string
          description: "æ›´æ–°æ—¥æ™‚åˆ†ç§’"
        updateFunction:
          type: string
          description: "æ›´æ–°æ©Ÿèƒ½"
        updateCount:
          type: integer
          description: "æ›´æ–°å›æ•°"
